### 3. ì˜¤í”ˆì†ŒìŠ¤ ì†Œê°œ  - 3.8  Swift Location(GoogleMaps Platform)



 ##### Swift Locationì€ Swiftì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬, ì‚¬ìš©ìì˜ ìœ„ì¹˜ ê´€ë ¨ ê¸°ëŠ¥ë“¤ì„ ì‰½ê²Œ ì‚¬ìš© í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ”  MIT LICENSE ì˜¤í”ˆì†ŒìŠ¤ ì…ë‹ˆë‹¤. 

[malcommac/SwiftLocation: ğŸ›° CoreLocation Made Easy - Efficient & Easy Location Tracker, IP Location, Gecoder, Geofence, Autocomplete, Beacon Ranging, Broadcaster and Visits Monitoring (github.com)](https://github.com/malcommac/SwiftLocation#autocomplete)

#### ê¸°ëŠ¥

* GPSë¥¼ í†µí•´ì„œ ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. - **(ì•„ë˜ ì˜ˆì‹œ, Swift ì‚¬ìš©)**

```swift
SwiftLocation.gpsLocationWith {
    // configure everything about your request
    $0.subscription = .continous // continous updated until you stop it
    $0.accuracy = .house 
    $0.minDistance = 300 // updated every 300mts or more
    $0.minInterval = 30 // updated each 30 seconds or more
    $0.activityType = .automotiveNavigation
    $0.timeout = .delayed(5) // 5 seconds of timeout after auth granted
}.then { result in // you can attach one or more subscriptions via `then`.
    switch result {
    case .success(let newData):
        print("New location: \(newData)")
    case .failure(let error):
        print("An error has occurred: \(error.localizedDescription)")
    }
}
```

* ì£¼ì†Œ, ì¥ì†Œì— ëŒ€í•´ì„œ ê²€ìƒ‰ ì‹œì— ìë™ì™„ì„± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.  

* ìì£¼ ë°©ë¬¸í•œ ê³³ì— ëŒ€í•´ì„œ ìœ„ì¹˜ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

* ì§€ì˜¤íœì‹± ì˜ì—­ì„ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.  **(ì•„ë˜ ì˜ˆì‹œ)**

  ```swift
  let options = GeofencingOptions(circleWithCenter: CLLocationCoordinate2D(latitude: 3, longitude: 2), radius: 100)
  SwiftLocation.geofenceWith(options).then { result in
      guard let event = result.data else { return }
  
      switch event {
      case .didEnteredRegion(let r):
          print("Triggered region entering! \(r)")
      case .didExitedRegion(let r):
          print("Triggered region exiting! \(r)")
      default:
          break
      }
  }
  ```

* í”„ë¡œê·¸ë¨(ì•±)ì´ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ì‚¬ì´ì—ë„ ë§ˆì§€ë§‰ìœ¼ë¡œ ì•Œë ¤ì§„ ìœ„ì¹˜ë¥¼ ìë™ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

* ë§Œì•½, ì‚¬ìš©ìê°€ GPSë¡œ ìœ„ì¹˜ì •ë³´ë¥¼ ì–»ëŠ” ê²ƒì— ëŒ€í•´ ë¹„ë™ì˜ í•  ê²½ìš°, ì •í™•í•˜ì§€ëŠ” ì•Šì§€ë§Œ IPì£¼ì†Œë¥¼ í†µí•´ ì–´ëŠì •ë„ ìœ„ì¹˜ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  **(ì´ ê¸°ëŠ¥ì„ ìœ„í•´ IPLocation data ê°ì²´ë¥¼ ì–»ëŠ” ë°©ë²• ì½”ë”© ì˜ˆì‹œ, Swift ì‚¬ìš©)**

```swift
SwiftLocation.ipLocationWith(IPLocation.IPData()).then { result in
    print(result.location.coordinates)
    // get the city and other data from .info dictionary
    print(result.location.info[.city])
    print(result.location.info[.countryCode])
}
```

* ì¢Œí‘œ(ìœ„ë„,ê²½ë„)ì—ì„œ ì£¼ì†Œë¥¼ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆê³ , ë°˜ëŒ€ë¡œ ì£¼ì†Œ(í˜¹ì€ ì§€ì—­ ëª…)ë¥¼ í†µí•´ ì¢Œí‘œë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. **(Google Map ì‚¬ìš©, ì§€ì˜¤ì½”ë”© ì˜ˆì‹œ, Swiftì‚¬ìš©)**

```swift
let service = Geocoder.Google(lat: 37.331656, lng: -122.0301426, APIKey: "<your api key>")
SwiftLocation.geocodeWith(service).then { result in
    // Different services, same expected output [GeoLocation]
    print(result.data)
}
```



#### GeoFencing (ì§€ì˜¤íœì‹±)

ì§€ì˜¤íœì‹±ì€ ì‹¤ì œ ìœ„ì¹˜ì— ê¸°ë°˜í•˜ì—¬, ê°€ìƒì˜ ê²½ê³„ë‚˜ êµ¬ì—­ì„ ë§Œë“œëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì§€ì˜¤íœìŠ¤ëŠ” ì‚¬ìš©ìì˜ ì‹¤ì‹œê°„ ìœ„ì¹˜ì™€ ì¶œì… ì •ë³´ë¥¼ ê¸°ë¡í•  ë•Œ í™œìš©ë©ë‹ˆë‹¤. ìœ„ì¹˜ ì •ë³´ë¥¼ ë‹´ì€ ëª¨ë°”ì¼ ê¸°ê¸°ê°€ ì§€ì €ëœ êµ¬ì—­ì— ë“¤ì–´ì˜¤ë©´ ì¡°ê±´ì— ë”°ë¼ í…ìŠ¤íŠ¸ ë©”ì‹œì§€, ì•ŒëŒ ë“± ë¯¸ë¦¬ ì •í•´ì§„ ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ê°€êµ¬ì¡°ì•„' ì—ì„œëŠ” ì§€ì˜¤íœì‹±ì„ ì´ìš©í•´ì„œ, íŠ¹ì • ì§€ì—­ìœ¼ë¡œ ê°€ë©´ í•´ë‹¹í•˜ëŠ” ì§€ì—­ì— ìˆëŠ” ê°€êµ¬, ì¸í…Œë¦¬ì–´ì ë“¤ì˜ í• ì¸ ì¿ í°ì„ ì‚¬ìš©ìì—ê²Œ ë°œì†¡í•˜ëŠ” ê¸°ëŠ¥ ë“±ì„ ì¶”ê°€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  ë˜í•œ ë°±ê·¸ë¼ìš´ë“œì—ì„œë„, ì•±ì´ ì¢…ë£Œë˜ì–´ë„ ì‘ë™í•˜ê¸°ì— ìœ ìš©í•©ë‹ˆë‹¤. 

#### GeoCoding (ì§€ì˜¤ì½”ë”©)

ì§€ì˜¤ì½”ë”©ì´ë€, ê³ ìœ ëª…ì¹­(ì¥ì†Œ)ë¥¼ ê°€ì§€ê³  ì¢Œí‘œ(ìœ„ë„,ê²½ë„)ë¥¼ ì–»ëŠ” ê²ƒì„ ëœ»í•©ë‹ˆë‹¤.

SwiftLocationì—ì„œì˜ ì§€ì˜¤ì½”ë”©, ì—­ ì§€ì˜¤ì½”ë”© ê¸°ëŠ¥ì€ **Google Maps Platform API**ì™€ ì—°ë™ë˜ì–´ ìˆìŠµë‹ˆë‹¤. êµ¬ê¸€ ë§µ í”Œë«í¼ì—ëŠ” êµ¬ê¸€ ë§µ ê´€ë ¨ ë‹¤ì–‘í•œ APIë“¤ì„ ë‹¨ìˆœíˆ Keyë°œê¸‰ì„ í†µí•´ì„œ ì‰½ê²Œ ì´ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì— ë”°ë¼ ì–´ëŠì •ë„ì˜ ê³¼ê¸ˆì´ ìš”êµ¬ë¨). ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ëŠ” ë§ì´ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ì¸ Python, Java, JavaScript, Go ë“±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. 



#### ì§€ì˜¤ì½”ë”© ê¸°ëŠ¥ ì‚¬ìš©ê³¼ì •

**Google Maps API**ì—ì„œ keyë¥¼ ë°œê¸‰ë°›ê³ , GoogleMap íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë°›ìŠµë‹ˆë‹¤. ì´ì œ íŠ¹ì • ì¥ì†Œë¥¼ ìœ„ë„, ê²½ë„ë¥¼ ì…ë ¥í•˜ë©´, í•´ë‹¹ ì§€ì—­ ê·¼ì²˜ì— ìˆëŠ” ì¥ì†Œë“¤ì„ ë„ì›Œì¤ë‹ˆë‹¤. ë§Œì•½, ìš°ë¦¬ê°€ ì°¾ëŠ” ê°€êµ¬ì ê³¼ ì¸í…Œë¦¬ì–´ì ë“¤ì´ êµ¬ê¸€ë§µì— ë“±ë¡ì´ ì•ˆë˜ì–´ ìˆë‹¤ë©´, Google Map APIì˜ ë§ˆì»¤ë“±ë¡ì„ í†µí•´ì„œ ì§€ë„ì— ì›í•˜ëŠ” ìœ„ì¹˜ì— ì¥ì†Œë¥¼ ë„ì‹ ê°€ëŠ¥í•©ë‹ˆë‹¤.  EX. JavaScript ê¸°ì¤€ìœ¼ë¡œ google.mapss.Marker() ìƒì„±ì í•¨ìˆ˜ ì‚¬ìš©.

##### ë§ˆì»¤ë“±ë¡ ì‚¬ìš© ì˜ˆì‹œ_JavaScriptì‚¬ìš© - (ë™ëŒ€ë¬¸ ì‡¼í•‘ëª°ì„ ì§€ë„ì— ë“±ë¡í•œë‹¤ê³  ê°€ì •)

```javascript
window.initMap = function () {
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 37.5400456, lng: 126.9921017 },
    zoom: 10,
  });

  const malls = [
    { label: "C", name: "ì½”ì—‘ìŠ¤ëª°", lat: 37.5115557, lng: 127.0595261 },
    { label: "G", name: "ê³ íˆ¬ëª°", lat: 37.5062379, lng: 127.0050378 },
    { label: "D", name: "ë™ëŒ€ë¬¸ì‹œì¥", lat: 37.566596, lng: 127.007702 },
    { label: "I", name: "IFCëª°", lat: 37.5251644, lng: 126.9255491 },
    { label: "L", name: "ë¡¯ë°ì›”ë“œíƒ€ì›Œëª°", lat: 37.5125585, lng: 127.1025353 },
    { label: "M", name: "ëª…ë™ì§€í•˜ìƒê°€", lat: 37.563692, lng: 126.9822107 },
    { label: "T", name: "íƒ€ì„ìŠ¤í€˜ì–´", lat: 37.5173108, lng: 126.9033793 },
  ];
  malls.forEach(({ label, name, lat, lng }) => {
    const marker = new google.maps.Marker({
      position: { lat, lng },
      label,
      map: map,
    });
  });
};
```



### Google Places API (ì£¼ë³€ ê°€ê²Œë“¤ ë¦¬ë·°, ëŒ“ê¸€ í™•ì¸ ê¸°ëŠ¥)

ì‚¬ìš©ìê°€ ì£¼ë³€ ê°€êµ¬ì  ë° ì¸í…Œë¦¬ì–´ì ì— ëŒ€í•´ì„œ, ë¦¬ë·°, ëŒ“ê¸€ ë“±ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ Google Places APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Places APIëŠ” HTTP ìš”ì²­ì„ ì‚¬ìš©í•´ì„œ ì¥ì†Œì— ê´€í•œ ì •ë³´ë¥¼ ë°˜í™˜í•˜ëŠ” ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤. ì´ API ë‚´ì—ì„œ ì¥ì†ŒëŠ” ê°ê°ì˜ ê³ ìœ í•œ IDê°€ ë¶€ì—¬ë˜ì–´ êµ¬ë³„ë©ë‹ˆë‹¤.  Places apiì‚¬ìš©ì€ ìœ„ì˜ êµ¬ê¸€ë§µapi ì‚¬ìš©ê³¼ ìœ ì‚¬í•˜ê²Œ, í‚¤ë¥¼ ë°œê¸‰ë°›ê³  ì„œë¹„ìŠ¤ì— ë”°ë¼ ëˆì„ ì§€ë¶ˆí•˜ë©´ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.



##### google places api ê¸°ëŠ¥

* **ì¥ì†Œ ê²€ìƒ‰**- ì‹œì„¤, ì£¼ìš” ê´€ì‹¬ ì¥ì†Œ, ì§€ë¦¬ì  ìœ„ì¹˜ì— ëŒ€í•œ ì¥ì†Œ ì •ë³´ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.

* **ì¥ì†Œ ì„¸ë¶€ì •ë³´**- ì‚¬ìš©ì ë¦¬ë·°, ëŒ“ê¸€ì„ ë¹„ë¡¯í•˜ì—¬ íŠ¹ì • ì¥ì†Œì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ë¥¼ ë°˜í™˜í•¨

* **ì¥ì†Œ ìë™ì™„ì„±**- ì‚¬ìš©ìê°€ ê²€ìƒ‰ ì‹œ, ì¥ì†Œì˜ ì´ë¦„ í˜¹ì€ ì£¼ì†Œë¥¼ ìë™ì™„ì„± í•´ì¤€ë‹¤.
* **ì¥ì†Œ ì‚¬ì§„** - ì•±ì— ì¥ì†Œì— ëŒ€í•œ ì‚¬ì§„ì„ ì¶”ê°€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
* **ì¥ì†Œ ID** - íŠ¹ì • ì¥ì†Œì— ëŒ€í•œ ì„¸ë¶€ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³ , ì¥ì†Œë“¤ì„ IDë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤. 
* **ì¥ì†Œ ì•„ì´ì½˜** - ë‹¤ì–‘í•œ ì¥ì†Œì— ëŒ€í•œ ìš”ì²­ ë° í‘œì‹œ ì•„ì´ì½˜ì„ ì „ì‹œí•  ìˆ˜ìˆìŠµë‹ˆë‹¤. 

* **ì¶”ì²œê²€ìƒ‰ì–´**- ì¿¼ë¦¬ ì˜ˆì¸¡ ì„œë¹„ìŠ¤ë¡œ ì¸í•´ ì‚¬ìš©ìê°€ ì…ë ¥í•˜ë©´ ì¶”ì²œ ê²€ìƒ‰ì–´ë¥¼ ë°˜í™˜í•œë‹¤.

